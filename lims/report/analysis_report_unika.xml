<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>
        <report
                id="lims.report_analysis_result_unika_boletin"
                string="Boletín"
                model="lims.analysis.line"
                report_type="qweb-pdf"
                name="lims.report_analysis_result_print_unika_boletin"
        />
        <template id="lims.report_analysis_result_print_unika_boletin">
            <t t-name="lims.report_analysis_result_print_unika_boletin">
                <t t-call="web.html_container">
                    <t t-foreach="docs" t-as="doc">
                        <t
                                t-call="lims.report_analysis_result_document_unika_boletin"
                                t-lang="doc.customer_id.lang"
                        />
                    </t>
                </t>
            </t>
        </template>
        <template id="lims.report_analysis_result_document_unika_boletin">
            <t t-name="lims.report_analysis_result_document_unika_boletin">
                <!-- seteamos variables de cabecera -->
                <t t-set="company" t-value="doc.company_id"/>
                <t t-set="product_name" t-value="doc.product_id.name"/>
                <t t-set="doc_name" t-value="doc.name"/>
                <t t-set="doc_id" t-value="doc.id"/>
                <t t-set="doc_complete_date" t-value="doc.date_complete"/>
                <t t-call="lims.external_layout_boxed">
                    <div class="page">
                        <style>
                            .table-striped>tbody>tr:nth-child(odd)>td,
                            .table-striped>tbody>tr:nth-child(odd)>th {
                            background-color: #d0d7e1;
                            }
                            .table-striped>tbody>tr{
                            background-color: #f2f1f0;
                            }
                        </style>
                        <div class="oe_structure"/>
                        <div class="row">
                            <div class="col-7">
                                <div style="width:90%;margin-left:1%;">
                                    <!--Nª muestra -->
                                    <div style="width:100%;height:28px;">
                                        <div style="width:35%;float:left;background-color:grey;padding-left:5px;">
                                            <span style="color:white;font-size:1em;font-weight:bolder;">MUESTRA Nª
                                            </span>
                                        </div>
                                        <div style="width:65%;float:left;padding-left:5px;">
                                            <span style="font-size:1em;font-weight:bolder;" t-esc="doc.lot_id.name"/>
                                        </div>
                                    </div>
                                    <!--Fin Nª muestra -->
                                    <div style="width:99%;clear:both;background-color:grey;padding-left:5px;">
                                        <span style="color:white;font-size:1em;font-weight:bolder;">IDENTIFICACIÓN DE
                                            LA MUESTRA
                                        </span>
                                    </div>
                                    <!-- muestra de -->
                                    <div style="width:100%;height:25.6px;font-size:0.8em;">
                                        <div style="width:20%;float:left;padding-left:5px;">
                                            <span style="font-size:1.1em;font-weight:bolder;">Muestra de:</span>
                                        </div>
                                        <div style="width:80%;float:left;padding-left:5px;">
                                            <span style="font-size:1.1em;font-weight:bolder;"
                                                  t-esc="doc.product_id.name"/>
                                        </div>
                                    </div>
                                    <!-- Fin muestra de -->
                                    <!-- Analsis de -->
                                    <div style="width:100%;height:25.6px;font-size:0.8em;">
                                        <div style="width:20%;float:left;padding-left:5px;">
                                            <span style="font-size:1.1em;font-weight:bolder;">Análisis de:</span>
                                        </div>
                                        <div style="width:80%;float:left;padding-left:5px;">
                                            <span style="font-size:1.1em;font-weight:bolder;"
                                                  t-esc="doc.analysis_name"/>
                                        </div>
                                    </div>
                                    <!-- Fin analisis de -->
                                    <!-- Temparatura -->
                                    <div style="width:100%;height:25.6px;font-size:0.8em;">
                                        <div style="width:20%;float:left;padding-left:5px;">
                                            <span style="font-size:1.1em;font-weight:bolder;">Temperatura:</span>
                                        </div>
                                        <div style="width:80%;float:left;padding-left:5px;">
                                            <t t-if="doc.temperature == 'ambient'">
                                                <span style="font-size:1.1em;font-weight:bolder;">Ambiente</span>
                                            </t>
                                            <t t-if="doc.temperature == 'refrigered'">
                                                <span style="font-size:1.1em;font-weight:bolder;">Refrigerada</span>
                                            </t>
                                        </div>
                                    </div>
                                    <!-- Fin Temperatura -->

                                    <!-- Lugar recogida -->
                                    <div style="width:100%;height:25.6px;font-size:0.8em;">
                                        <div style="width:20%;float:left;padding-left:5px;">
                                            <span style="font-size:1.1em;font-weight:bolder;">L. Recogida:</span>
                                        </div>
                                        <div style="width:80%;float:left;padding-left:5px;">
                                            <span style="font-size:1.1em;font-weight:bolder;"
                                                  t-esc="doc.capture_place"/>
                                        </div>
                                    </div>
                                    <!-- Fin Lugar recogida -->
                                    <!-- caducidad y lote-->
                                    <div style="width:100%;height:25.6px;font-size:0.8em;">
                                        <!-- caducidad -->
                                        <div style="width:20%;float:left;padding-left:5px;">
                                            <span style="font-size:1.1em;font-weight:bolder;">Caducidad:</span>
                                        </div>
                                        <div style="width:20%;float:left;padding-left:5px;">
                                            <t t-if="doc.date_expired">
                                                <span style="font-size:1.1em;font-weight:bolder;"
                                                      t-esc="doc.date_expired"
                                                      t-options='{"widget": "date","format": "dd/MM/yyyy"}'/>
                                            </t>
                                            <t t-else="">
                                                <span style="font-size:1.1em;font-weight:bolder;color:white;">
                                                    caducidad
                                                </span>
                                            </t>
                                        </div>
                                        <!-- caducidad -->
                                        <!-- Lote -->
                                        <div style="width:10%;float:left;padding-left:5px;">
                                            <span style="font-size:1.1em;font-weight:bolder;">Lote:</span>
                                        </div>
                                        <div style="width:50%;float:left;padding-left:5px;">
                                            <t t-if="doc.lot_name">
                                                <span style="font-size:1.1em;font-weight:bolder;" t-esc="doc.lot_name"/>
                                            </t>
                                            <t t-else="">
                                                <span style="font-size:1.1em;font-weight:bolder;color:white;">lote
                                                </span>
                                            </t>
                                        </div>
                                        <!-- Fin lote -->
                                    </div>
                                    <!-- Fin caducidad y lote -->
                                    <!-- Tomada por-->
                                    <div style="width:100%;height:25.6px;font-size:0.8em;">
                                        <div style="width:20%;float:left;padding-left:5px;">
                                            <span style="font-size:1.1em;font-weight:bolder;">Tomada por:</span>
                                        </div>
                                        <div style="width:80%;float:left;padding-left:5px;">
                                            <span style="font-size:1.1em;font-weight:bolder;">Cliente</span>
                                        </div>
                                    </div>
                                    <!-- Fin Tomada por -->
                                    <!-- Presentación -->
                                    <div style="width:100%;height:25.6px;font-size:0.8em;">
                                        <div style="width:20%;float:left;padding-left:5px;">
                                            <span style="font-size:1.1em;font-weight:bolder;">Presentación:</span>
                                        </div>
                                        <div style="width:80%;float:left;padding-left:5px;">
                                            <t t-if="doc.presentation">
                                                <span style="font-size:1.1em;font-weight:bolder;"
                                                      t-esc="doc.presentation"/>
                                            </t>
                                            <t t-else="">
                                                <span style="font-size:1.1em;font-weight:bolder;color:white;">
                                                    presentación
                                                </span>
                                            </t>
                                        </div>
                                    </div>
                                    <!-- Fin Presentación -->
                                </div>
                            </div>
                            <div class="col-5">
                                <div style="width:122%;margin-left:-22%;padding-top:28px;">
                                    <div style="width:99%;clear:both;background-color:grey;padding-left:5px;">
                                        <span style="color:white;font-size:1em;font-weight:bolder;">IDENTIFICACIÓN DEL
                                            CLIENTE
                                        </span>
                                    </div>
                                    <!-- nombre -->
                                    <div style="width:100%;height:25.6px;font-size:0.8em;">
                                        <div style="width:21%;float:left;padding-left:5px;">
                                            <span style="font-size:1.1em;font-weight:bolder;">Nombre:</span>
                                        </div>
                                        <div style="width:79%;float:left;padding-left:5px;">
                                            <span style="font-size:1.1em;font-weight:bolder;"
                                                  t-esc="doc.customer_id.name"/>
                                        </div>
                                    </div>
                                    <!-- Fin nombre -->
                                    <!-- dirección -->
                                    <div style="width:100%;height:25.6px;font-size:0.8em;">
                                        <div style="width:21%;float:left;padding-left:5px;">
                                            <span style="font-size:1.1em;font-weight:bolder;">Dirección:</span>
                                        </div>
                                        <div style="width:79%;float:left;padding-left:5px;height:51.2px;font-size:0.9em;">
                                            <span style="font-size:1.1em;font-weight:bolder;display:block"
                                                  t-esc="doc.customer_id.street"/>
                                            <div style="display:block;">
                                                <span style="font-size:1.1em;font-weight:bolder;"
                                                      t-esc="doc.customer_id.zip"/>
                                                <span>-</span>
                                                <span style="font-size:1.1em;font-weight:bolder;"
                                                      t-esc="doc.customer_id.city"/>
                                                <span>(</span>
                                                <span style="font-size:1.1em;font-weight:bolder;"
                                                      t-esc="doc.customer_id.state_id.name"/>
                                                <span>)</span>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Fin dirección -->
                                    <!-- CIF -->
                                    <div style="width:100%;height:25.6px;font-size:0.8em;">
                                        <div style="width:21%;float:left;padding-left:5px;">
                                            <span style="font-size:1.1em;font-weight:bolder;">CIF:</span>
                                        </div>
                                        <div style="width:79%;float:left;padding-left:5px;">
                                            <t t-if="doc.customer_id.vat">
                                                <span style="font-size:1.1em;font-weight:bolder;"
                                                      t-esc="doc.customer_id.vat"/>
                                            </t>
                                            <t t-else="">
                                                <span style="font-size:1.1em;font-weight:bolder;color:white;">cif</span>
                                            </t>
                                        </div>
                                    </div>
                                    <!-- Fin CIF -->
                                    <div style="width:99%;clear:both;background-color:grey;padding-left:5px;height:28px">
                                        <span style="color:white;font-size:1em;font-weight:bolder;">CONTROL DE
                                            FECHAS
                                        </span>
                                    </div>
                                    <div style="display:block;width:25%;float:left;">
                                        <div>
                                            <span style="font-size:1.1em;display:block;width:100%;text-align:center;font-weight:bolder;height:25.6px;font-size:0.8em;">
                                                Entrada
                                            </span>
                                        </div>
                                        <div>
                                            <span style="font-size:1.1em;display:block;width:100%;text-align:center;font-weight:bolder;height:25.6px;font-size:0.8em;"
                                                  t-esc="doc.date_sample_receipt"
                                                  t-options='{"widget": "date","format": "dd/MM/yyyy"}'/>
                                        </div>
                                    </div>
                                    <div style="display:block;width:25%;float:left;">
                                        <div>
                                            <span style="font-size:1.1em;display:block;width:100%;text-align:center;font-weight:bolder;height:25.6px;font-size:0.8em;">
                                                Inicio
                                            </span>
                                        </div>
                                        <div>
                                            <span style="font-size:1.1em;display:block;width:100%;text-align:center;font-weight:bolder;height:25.6px;font-size:0.8em;"
                                                  t-esc="doc.date_sample_begin"
                                                  t-options='{"widget": "date","format": "dd/MM/yyyy"}'/>
                                        </div>
                                    </div>
                                    <div style="display:block;width:25%;float:left;">
                                        <div>
                                            <span style="font-size:1.1em;display:block;width:100%;text-align:center;font-weight:bolder;height:25.6px;font-size:0.8em;">
                                                Finalización
                                            </span>
                                        </div>
                                        <div>
                                            <span style="font-size:1.1em;display:block;width:100%;text-align:center;font-weight:bolder;height:25.6px;font-size:0.8em;"
                                                  t-esc="doc.date_complete"
                                                  t-options='{"widget": "date","format": "dd/MM/yyyy"}'/>
                                        </div>
                                    </div>
                                    <div style="display:block;width:25%;float:left;">
                                        <div>
                                            <span style="font-size:1.1em;display:block;width:100%;text-align:center;font-weight:bolder;height:25.6px;font-size:0.8em;">
                                                Salida
                                            </span>
                                        </div>
                                        <div>
                                            <span style="font-size:1.1em;display:block;width:100%;text-align:center;font-weight:bolder;height:25.6px;font-size:0.8em;"
                                                  t-esc="doc.date_exit"
                                                  t-options='{"widget": "date","format": "dd/MM/yyyy"}'/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- su referencia -->
                        <div style="width:99%;height:25.6px;font-size:0.8em;margin-left:0.5%">
                            <div style="width:10.9%;float:left;padding-left:5px;">
                                <span style="font-size:1.1em;font-weight:bolder;">Su referencia:</span>
                            </div>
                            <div style="width:89.1%;float:left;">
                                <span style="font-size:1.1em;font-weight:bolder;" t-esc="doc.description"/>
                            </div>
                        </div>
                        <!-- Fin su referencia -->
                        <!-- Resultados -->
                        <t t-foreach="doc.parameter_type_in_lims" t-as="type">

                            <t
                                    t-set="parameters_grouped"
                                    t-value="doc.numerical_result.filtered(lambda l: l.type_tags.id == type.id)"/>
                            <t t-if="parameters_grouped">
                                <h1 style="clear:both;color:white;font-size:0.6em">test
                                    <span t-esc="type.name"></span>
                                </h1>
                                <t t-set="last_type" t-value=""/>
                                <table name="analysis_line_table" style="width:100%;margin-top:0px;clear:both;">
                                    <t t-foreach="parameters_grouped" t-as="line">
                                        <t t-set="l" t-value="line"/>
                                        <t t-set="actual_type" t-value="line.type_tags"/>
                                        <t t-if="actual_type != last_type">
                                            <thead style="clear:both">
                                                <tr>
                                                    <th>

                                                        <!--Cabecera -->
                                                        <div
                                                                style="display:block;width:100%;clear:both;"
                                                        >
                                                            <div
                                                                    style="width:29.5%;margin-right:0.5%;float:left;background-color:grey;height:35px;display:table;"
                                                            >
                                                                <span
                                                                        style="padding-left:5px;display:table-cell;vertical-align: middle;color:white;"
                                                                >
                                                                    <strong>Parámetro</strong>
                                                                </span>
                                                            </div>
                                                            <div
                                                                    style="width:24%;margin-right:0.5%;float:left;background-color:grey;height:35px;display:table;"
                                                            >
                                                                <span
                                                                        style="padding-left:5px;display:table-cell;vertical-align: middle;color:white;"
                                                                >
                                                                    Método
                                                                </span>
                                                            </div>
                                                            <div
                                                                    style="width:18.5%;margin-right:0.5%;float:left;background-color:grey;height:35px;display:table;"
                                                            >
                                                                <span
                                                                        style="padding-left:5px;display:table-cell;vertical-align: middle;color:white;"
                                                                >
                                                                    Límite
                                                                </span>
                                                            </div>
                                                            <div
                                                                    style="width:14%;margin-right:0.5%;float:left;background-color:grey;height:35px;display:table;"
                                                            >
                                                                <span
                                                                        style="padding-left:5px;display:table-cell;vertical-align: middle;color:white;"
                                                                >
                                                                    Resultado
                                                                </span>
                                                            </div>
                                                            <div
                                                                    style="width:12%;float:left;background-color:grey;height:35px;display:table;"
                                                            >
                                                                <span
                                                                        style="padding-left:5px;display:table-cell;vertical-align: middle;color:white;"
                                                                >
                                                                    Unidades
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <!--Fin Cabecera -->
                                                        <!-- Etiqueta analisis tipo -->
                                                        <div
                                                                style="display:block;width:100%;height:30px;clear:both;"
                                                        >
                                                            <div
                                                                    style="width:99.5%;margin-left:0.5%;display:table;height:30px;"
                                                            >
                                                                <span
                                                                        t-field="line.parameter_ids.type_tags.description"
                                                                        style="font-size:1em;display:table-cell;vertical-align: middle;font-weight:bolder;text-align:center;"
                                                                />
                                                            </div>
                                                        </div>
                                                        <!--  fin Etiqueta analisis tipo -->
                                                        <div
                                                                style="display:block;clear:both;margin-bottom:2px;width:100%;height:2px;background-color:#d0d7e1;"
                                                        >
                                                        </div>
                                                    </th>
                                                </tr>
                                            </thead>
                                        </t>
                                        <t t-set="last_type" t-value="actual_type"/>
                                        <tbody style="clear:both">
                                            <tr>
                                                <td>
                                                    <div
                                                            style="display:block;width:100%;clear:both;font-size:0.9em;"
                                                    >
                                                        <div
                                                                style="width:29.5%;margin-right:0.5%;float:left;"
                                                        >
                                                            <span
                                                                    t-field="line.parameter_ids.name"
                                                                    style="padding-left:5px;"
                                                            />
                                                        </div>
                                                        <div
                                                                style="width:24%;margin-right:0.5%;float:left;"
                                                        >
                                                            <span
                                                                    t-field="line.analytical_method_id.name"
                                                                    style="padding-left:5px;"
                                                            />
                                                        </div>
                                                        <div
                                                                style="width:18.5%;margin-right:0.5%;float:left;"
                                                        >
                                                            <t t-if="line.legislation_value == 'Present'">
                                                                <span style="padding-left:5px;">
                                                                    Presente
                                                                </span>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-if="line.legislation_value == 'Not Present'">
                                                                    <span style="padding-left:5px;">
                                                                        No presente
                                                                    </span>
                                                                </t>
                                                                <t t-else="">
                                                                    <span t-field="line.legislation_value"
                                                                          style="padding-left:5px;"/>
                                                                </t>
                                                            </t>
                                                        </div>
                                                        <div
                                                                style="width:14%;margin-right:0.5%;float:left;height:15px;display:table;"
                                                        >
                                                            <t
                                                                    t-if="line.data_sheet == 'Present'"
                                                            >
                                                                <span
                                                                        style="padding-left:5px;"
                                                                >
                                                                    Presente
                                                                </span>
                                                            </t>
                                                            <t t-else="">
                                                                <t
                                                                        t-if="line.data_sheet == 'Not Present'"
                                                                >
                                                                    <span
                                                                            style="padding-left:5px;"
                                                                    >
                                                                        No presente
                                                                    </span>
                                                                </t>
                                                                <t t-else="">
                                                                    <t t-if="line.change_value_for_comment">
                                                                        <span
                                                                                t-field="line.valor_informe"
                                                                                style="padding-left:5px;"
                                                                        />
                                                                    </t>
                                                                    <t t-else="">
                                                                        <t t-if="line.show_potency">
                                                                            <t t-set="valor_exponente"
                                                                               t-value="line.valor_exponente"/>
                                                                            <span style="padding-left:5px;">
                                                                                <t t-if="valor_exponente.find('+') == 0">
                                                                                    <t t-set="valor_exponente"
                                                                                       t-value="valor_exponente[1:]"/>
                                                                                    <t t-if="valor_exponente.find('0') == 0">
                                                                                        <t t-set="valor_exponente"
                                                                                           t-value="valor_exponente[1:]"/>
                                                                                    </t>
                                                                                </t>
                                                                                <span t-esc="line.valor_potencia"/>
                                                                                <span>x10
                                                                                    <sup>
                                                                                        <span t-esc="line.valor_exponente"/>
                                                                                    </sup>
                                                                                </span>
                                                                            </span>
                                                                        </t>
                                                                        <t t-else="">
                                                                            <span
                                                                                    t-field="line.value"
                                                                                    style="padding-left:5px;"
                                                                            />
                                                                        </t>

                                                                    </t>

                                                                </t>
                                                            </t>

                                                        </div>
                                                        <div
                                                                style="width:12%;float:left;"
                                                        >
                                                            <span
                                                                    t-field="line.parameter_uom"
                                                                    style="padding-left:5px;"
                                                            />
                                                        </div>
                                                        <div
                                                                style="display:block;clear:both;margin-bottom:1px;width:100%;height:2px;background-color:#d0d7e1;"
                                                        >
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </t>
                                </table>
                            </t>
                        </t>
                        <!--                        <div-->
                        <!--                                style="display:block;clear:both;margin-top:2px;margin-bottom:15px;width:100%;height:10px;background-color:grey;"-->
                        <!--                        >-->
                        <!--                        </div>-->
                        <!-- Fin Resultados -->
                        <div style="clear:both;"/>
                        <!-- Comentarios -->
                        <table t-if="doc.note" style="width:100%;">
                            <tr>
                                <td>
                                    <div t-if="doc.note">
                                        <div
                                                style="clear:both;width:100%;background-color:grey;padding-bottom:2px;height:28px;margin-top:5px;"
                                        >
                                            <!-- Etiqueta Comentarios -->
                                            <div
                                                    style="width:100%;margin-left:0.5%;display:table;height:28px;"
                                            >
                                                <span
                                                   style="font-size:1.1em;display:table-cell;vertical-align: middle;color:white;font-weight:bolder;"
                                                >Comentarios
                                                </span>
                                            </div>
                                        </div>
                                        <!--  fin Etiqueta Comentarios -->
                                    </div>
                                    <div style="clear:both;display:block;width:95%;margin-left:2.5%;font-size:0.8em;">
                                        <span t-field="doc.note"/>
                                    </div>
                                </td>
                            </tr>
                        </table>
                        <!-- Fin Comentarios -->
                        <!-- applied_legislation -->
                        <table t-if="doc.applied_legislation" style="width:100%;">
                            <tr>
                                <td>
                                    <div t-if="doc.applied_legislation">
                            <div
                                    style="clear:both;width:100%;background-color:grey;padding-bottom:2px;height:28px;margin-top:5px;"
                            >
                                <!-- Etiqueta observations -->
                                <div
                                        style="width:100%;margin-left:0.5%;display:table;height:28px;"
                                >
                                    <span
                                            style="font-size:1.1em;display:table-cell;vertical-align: middle;color:white;font-weight:bolder;"
                                    >Legislaciones Aplicadas
                                    </span>
                                </div>
                            </div>
                            <!--  fin Etiqueta observations -->
                        </div>
                        <div style="clear:both;display:block;width:95%;margin-left:2.5%;font-size:0.8em;">
                            <span t-field="doc.applied_legislation"/>
                        </div>
                                </td>
                            </tr>
                        </table>
                        <!-- Fin applied_legislation -->
                        <!-- observations -->
                        <table t-if="doc.observations" style="width:100%;">
                            <tr>
                                <td>
                                    <div t-if="doc.observations">
                            <div
                                    style="clear:both;width:100%;background-color:grey;padding-bottom:2px;height:28px;margin-top:5px;"
                            >
                                <!-- Etiqueta observations -->
                                <div
                                        style="width:100%;margin-left:0.5%;display:table;height:28px;"
                                >
                                    <span
                                            style="font-size:1.1em;display:table-cell;vertical-align: middle;color:white;font-weight:bolder;"
                                    >Observaciones
                                    </span>
                                </div>
                            </div>
                            <!--  fin Etiqueta observations -->
                        </div>
                        <div style="clear:both;display:block;width:95%;margin-left:2.5%;font-size:0.8em;">
                            <span t-field="doc.observations"/>
                        </div>
                                </td>
                            </tr>
                        </table>
                        <!-- Fin observations -->
                        <!-- Firma -->
                        <div class="row">
                            <div class="col-8"></div>
                            <div class="col-4">
                                <table>
                                    <tr>
                                        <td>
                                            <b>
                                                <span style="display:block;width:100%;text-align:center;">Responsable
                                                    Técnico UNIKALAB
                                                </span>
                                            </b>
                                            <span style="display:block;width:100%;text-align:center;">Rocío Delgado
                                                Perez
                                            </span>
                                            <img
                                                    style="width:80%;margin-left:10%;"
                                                    src="/lims/static/src/img/firma_boletin.png"
                                            />
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <!-- Fin Firma -->
                    </div>
                </t>
            </t>
        </template>
    </data>
</odoo>